ACC URN Format Research - 2025-08-09T16:10:58.996Z

Für die Autodesk Construction Cloud (ACC) Data Management API v1 muss die **project_id** im Format **b.{GUID}** angegeben werden. Das bedeutet, du musst deiner Projekt-GUID ein **b.**-Präfix voranstellen, z.B. **b.4e325aa4-b44b-4e90-9a15-a322fa67b719**[1].

### 1. KORREKTES URN-FORMAT FÜR ACC

- **Für project_id:** Das Format ist **b.{GUID}** (z.B. `b.4e325aa4-b44b-4e90-9a15-a322fa67b719`).
- **Für folder_id:** Das Format ist ein URN, z.B. `urn:adsk.wipprod:fs.folder:co.{FOLDER_ID}`[1].
- **Für items/files:** Das Format ist ein URN, z.B. `urn:adsk.wipprod:dm.lineage:{ITEM_ID}`.

**Hinweis:** Das URN-Format wie `urn:adsk.wipprod:dm.lineage:{GUID}` wird für Items (Dateien) und nicht für die project_id verwendet[1].

### 2. KORREKTER API-AUFRUF

Der korrekte API-Call für den Root-Folder-Inhalt sieht so aus:

```http
GET https://developer.api.autodesk.com/data/v1/projects/b.4e325aa4-b44b-4e90-9a15-a322fa67b719/folders/root/contents
```

- **project_id:** `b.4e325aa4-b44b-4e90-9a15-a322fa67b719`
- **folder_id:** `root` (für den Root-Folder)

### 3. WELCHE ENDPOINTS SOLLTEST DU ZUERST TESTEN?

Um die Struktur und IDs korrekt zu erhalten, solltest du folgende Endpoints testen:

- **GET hubs:** Hole die Hub-IDs (Account-IDs).
- **GET projects:** Hole die Projekte im Hub und prüfe die project_id (sie sollte mit `b.` beginnen).
- **GET folders:** Hole die Folder-IDs, z.B. für den Root-Folder.
- **GET items:** Hole die Item-IDs (Dateien), um deren URN zu bekommen.

**Empfohlene Reihenfolge:**
1. `GET /project/v1/hubs`
2. `GET /project/v1/hubs/{hub_id}/projects`
3. `GET /data/v1/projects/{project_id}/folders/root/contents`
4. Weitere: `GET /data/v1/projects/{project_id}/folders/{folder_id}/contents`

### 4. CODE-BEISPIEL (Node.js/JavaScript)

```javascript
const axios = require('axios');

const accessToken = 'YOUR_ACCESS_TOKEN';
const projectId = 'b.4e325aa4-b44b-4e90-9a15-a322fa67b719';

async function getRootFolderContents() {
  const url = `https://developer.api.autodesk.com/data/v1/projects/${projectId}/folders/root/contents`;
  try {
    const response = await axios.get(url, {
      headers: {
        Authorization: `Bearer ${accessToken}`,
        'Content-Type': 'application/vnd.api+json'
      }
    });
    console.log(response.data);
  } catch (error) {
    console.error(error.response?.data || error.message);
  }
}

getRootFolderContents();
```

### Wichtige Hinweise

- **400 BAD_INPUT "Invalid project id"** tritt auf, wenn das `b.`-Präfix fehlt oder die GUID falsch ist[1].
- Die **project_id** ist immer im Format `b.{GUID}` für ACC/BIM360[1].
- URN-Formate wie `urn:adsk.wipprod:dm.lineage:{GUID}` werden für Items/Dateien verwendet, nicht für die project_id[1].

**Zusammengefasst:**  
Für die Data Management API v1 von ACC muss die project_id immer mit `b.` beginnen. URN-Formate sind für Items und Folders relevant, nicht für die project_id[1].